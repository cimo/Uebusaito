"use strict";class TableAndPagination{set setButtonStatus(t){this.buttonStatus=t}constructor(){this.urlRequest="",this.idResult=0,this.selectOnlyOne=!1,this.current=0,this.total=0,this.clickedEvent=!1,this.sortOrderBy=!1,this.buttonStatus=""}create=(t,e,i)=>{this.urlRequest=t,this.idResult=e,this.selectOnlyOne=i,this._status(),helper.linkPreventDefault(),!0===this.selectOnlyOne&&helper.selectOnlyOneElement(this.idResult+" table tbody"),this._resizeColumn()};search=()=>{let t=this.idResult+" .tableAndPagination_container .mdc-text-field__input",e=this.idResult+" .tableAndPagination_container .mdc-text-field .material-icons";$(t).on("keyup","",t=>{!0!==this.clickedEvent&&13===t.which&&(this.current=0,this._send(),this.clickedEvent=!0)}),$(e).on("click","",t=>{!0!==this.clickedEvent&&(this.current=0,this._send(),this.clickedEvent=!0)})};pagination=()=>{let t=this.idResult+" .tableAndPagination_container .previous",e=this.idResult+" .tableAndPagination_container .next";$(t).on("click","",t=>{!0!==this.clickedEvent&&this.total>1&&this.current>0&&(this.current--,this._send(),this.clickedEvent=!0)}),$(e).on("click","",t=>{!0!==this.clickedEvent&&this.total>1&&this.current<this.total-1&&(this.current++,this._send(),this.clickedEvent=!0)})};sort=()=>{$(this.idResult).on("click","table thead tr th",t=>{let e=$(this.idResult).find("table tbody tr"),i=!1===$(t.currentTarget).is("i")?$(t.currentTarget).index():$(t.currentTarget).parent().index();$(t.currentTarget).parent().find("i").hide(),!1===this.sortOrderBy?($(t.currentTarget).find("i").eq(0).show(),$(t.currentTarget).find("i").eq(1).hide(),this.sortOrderBy=!0):($(t.currentTarget).find("i").eq(0).hide(),$(t.currentTarget).find("i").eq(1).show(),this.sortOrderBy=!1),e.sort((t,e)=>{let n=0,s=$.trim($(t).children("td").eq(i).text().toLowerCase()),l=$.trim($(e).children("td").eq(i).text().toLowerCase());return""!==s&&""!==l&&(n=!0===this.sortOrderBy?!1===$.isNumeric(s)?s.localeCompare(l):s-l:!1===$.isNumeric(s)?l.localeCompare(s):l-s),n}),e.length>1&&$.each(e,(t,e)=>{$(this.idResult).find("table tbody").append(e)})})};populate=t=>{$(this.idResult).find(".tableAndPagination_container .mdc-text-field__input").val(""),$(this.idResult).find("table tbody").css("visibility","visible"),void 0!==t.response.values&&($(this.idResult).find(".tableAndPagination_container .mdc-text-field__input").val(t.response.values.search.value),$(this.idResult).find(".tableAndPagination_container .text").html(t.response.values.pagination.text),void 0!==t.response.values.count&&($(this.idResult).find(".tableAndPagination_container .count").show(),$(this.idResult).find(".tableAndPagination_container .count span").html(t.response.values.count)),$(this.idResult).find("table tbody").length>0?$(this.idResult).find("table tbody").html(t.response.values.listHtml):$(this.idResult).find(".list_result").html(t.response.values.listHtml),this._status(),this._resizeColumn())};_status=()=>{let t=$.trim($(this.idResult).find(".tableAndPagination_container .text").text());if(void 0!==t||""!==t){let e=t.split("/"),i=parseInt($.trim(e[0])),n=parseInt($.trim(e[1]));i>n&&0===$(this.idResult).find("table tbody tr").length&&$(this.idResult).find(".tableAndPagination_container .previous").click(),this.current<0&&(this.current=0),this.total=n}$(this.idResult).find(".tableAndPagination_container .previous .mdc-button").prop("disabled",!0),$(this.idResult).find(".tableAndPagination_container .next .mdc-button").prop("disabled",!0);let e=$(this.idResult).find(".tableAndPagination_container .previous .mdc-button"),i=$(this.idResult).find(".tableAndPagination_container .next .mdc-button");e.length>0&&i.length>0&&(this.total>1&&this.current>0&&e.removeAttr("disabled"),this.total>1&&this.current<this.total-1&&i.removeAttr("disabled"),$.each($(this.idResult).find("table thead tr th"),(t,e)=>{$(e).find("i").hide()}),"show"===this.buttonStatus&&$(this.idResult).find(".tableAndPagination_container .button_container").show())};_send=()=>{let t={event:"tableAndPagination",searchWritten:$(this.idResult).find(".tableAndPagination_container .mdc-text-field__input").val(),paginationCurrent:this.current,token:window.session.token};ajax.send(!1,this.urlRequest,"post",t,"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",()=>{$(this.idResult).find(".update_loading").css("display","inline-block"),$(this.idResult).find("table tbody").css("visibility","hidden")},t=>{ajax.reply(t,""),void 0!==t.response.values&&this.populate(t),helper.linkPreventDefault(),!0===this.selectOnlyOne&&helper.selectOnlyOneElement(this.idResult+" table tbody"),this._resizeColumn(),this.clickedEvent=!1,$(this.idResult).find(".update_loading").css("display","none")},null,null)};_resizeColumn=()=>{$(()=>{$(this.idResult).find("table tbody tr td").resizable({handles:"e"})})}}