"use strict";function TableAndPagination(){const t=this;let n,e,i,a,l,o,d,s;function c(){let t=$.trim($(e).find(".tableAndPagination .text").text());if(void 0!==t||""!==t){let n=t.split("/"),i=parseInt($.trim(n[0])),o=parseInt($.trim(n[1]));i>o&&0===$(e).find("table tbody tr").length&&$(e).find(".tableAndPagination .previous").click(),a<0&&(a=0),l=o}$(".tableAndPagination .previous .mdc-button").prop("disabled",!0),$(".tableAndPagination .next .mdc-button").prop("disabled",!0);let n=$(e).find(".tableAndPagination .previous .mdc-button"),i=$(e).find(".tableAndPagination .next .mdc-button");n.length>0&&i.length>0&&(l>1&&a>0&&n.removeAttr("disabled"),l>1&&a<l-1&&i.removeAttr("disabled"),$.each($(e).find("table thead tr th"),function(t,n){$(n).find("i").hide()}),"show"===s&&$(e).find(".tableAndPagination .button_container").show())}function r(){let l={event:"tableAndPagination",searchWritten:$(e).find(".tableAndPagination .mdc-text-field__input").val(),paginationCurrent:a,token:window.session.token};ajax.send(!1,n,"post",l,"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",function(){$(e).find(".update_loading").css("display","inline-block"),$(e).find("table tbody").css("visibility","hidden")},function(n){ajax.reply(n,""),void 0!==n.response.values&&t.populate(n),helper.linkPreventDefault(),!0===i&&helper.selectOnlyOneElement(e+" table tbody"),u(),o=!1,$(e).find(".update_loading").css("display","none")},null,null)}function u(){$(function(){$(e).find("table tbody tr td").resizable({handles:"e"})})}t.setButtonsStatus=function(t){s=t},t.init=function(){n="",e="",i="",a=0,l=0,o=!1,d=!1,s=""},t.create=function(t,a,l){n=t,e=a,i=l,c(),helper.linkPreventDefault(),!0===i&&helper.selectOnlyOneElement(e+" table tbody"),u()},t.search=function(){let t=e+" .tableAndPagination .mdc-text-field .material-icons";$(e+" .tableAndPagination .mdc-text-field__input").on("keyup","",function(t){!0!==o&&13===t.which&&(a=0,r(),o=!0)}),$(t).on("click","",function(){!0!==o&&(a=0,r(),o=!0)})},t.pagination=function(){let t=e+" .tableAndPagination .next";$(e+" .tableAndPagination .previous").on("click","",function(){!0!==o&&l>1&&a>0&&(a--,r(),o=!0)}),$(t).on("click","",function(){!0!==o&&l>1&&a<l-1&&(a++,r(),o=!0)})},t.sort=function(){$(e).on("click","table thead tr th",function(t){let n=$(e).find("table tbody tr"),i=!1===$(t.target).is("i")?$(t.target).index():$(t.target).parent().index();$(this).parent().find("i").hide(),!1===d?($(this).find("i").eq(0).show(),$(this).find("i").eq(1).hide(),d=!0):($(this).find("i").eq(0).hide(),$(this).find("i").eq(1).show(),d=!1),n.sort(function(t,n){let e=0,a=$.trim($(t).children("td").eq(i).text().toLowerCase()),l=$.trim($(n).children("td").eq(i).text().toLowerCase());return""!==a&&""!==l&&(e=!0===d?!1===$.isNumeric(a)?a.localeCompare(l):a-l:!1===$.isNumeric(a)?l.localeCompare(a):l-a),e}),n.length>1&&$.each(n,function(t,n){$(e).find("table tbody").append(n)})})},t.populate=function(t){$(e).find(".tableAndPagination .mdc-text-field__input").val(""),$(e).find("table tbody").css("visibility","visible"),void 0!==t.response.values&&($(e).find(".tableAndPagination .mdc-text-field__input").val(t.response.values.search.value),$(e).find(".tableAndPagination .text").html(t.response.values.pagination.text),void 0!==t.response.values.count&&($(e).find(".tableAndPagination .count").show(),$(e).find(".tableAndPagination .count span").html(t.response.values.count)),$(e).find("table tbody").length>0?$(e).find("table tbody").html(t.response.values.listHtml):$(e).find(".list_result").html(t.response.values.listHtml),c(),u())}}