"use strict";function TableAndPagination(){let t,n,e,i,a,l,o,d,s=this;function c(){let t=$.trim($(n).find(".tableAndPagination .text").text());if(void 0!==t||""!==t){let e=t.split("/"),l=parseInt($.trim(e[0])),o=parseInt($.trim(e[1]));l>o&&0===$(n).find("table tbody tr").length&&$(n).find(".tableAndPagination .previous").click(),i<0&&(i=0),a=o}$(".tableAndPagination .previous .mdc-button").prop("disabled",!0),$(".tableAndPagination .next .mdc-button").prop("disabled",!0);let e=$(n).find(".tableAndPagination .previous .mdc-button"),l=$(n).find(".tableAndPagination .next .mdc-button");e.length>0&&l.length>0&&(a>1&&i>0&&e.removeAttr("disabled"),a>1&&i<a-1&&l.removeAttr("disabled"),$.each($(n).find("table thead tr th"),function(t,n){$(n).find("i").hide()}),"show"===d&&$(n).find(".tableAndPagination .button_container").show())}function r(){let a={event:"tableAndPagination",searchWritten:$(n).find(".tableAndPagination .mdc-text-field__input").val(),paginationCurrent:i,token:window.session.token};ajax.send(!1,t,"post",a,"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",function(){$(n).find(".update_loading").css("display","inline-block"),$(n).find("table tbody").css("visibility","hidden")},function(t){ajax.reply(t,""),void 0!==t.response.values&&s.populate(t),helper.linkPreventDefault(),!0===e&&helper.selectOnlyOneElement(n+" table tbody"),u(),l=!1,$(n).find(".update_loading").css("display","none")},null,null)}function u(){$(function(){$(n).find("table tbody tr td").resizable({handles:"e"})})}s.setButtonsStatus=function(t){d=t},s.init=function(){t="",n="",e="",i=0,a=0,l=!1,o=!1,d=""},s.create=function(i,a,l){t=i,n=a,e=l,c(),helper.linkPreventDefault(),!0===e&&helper.selectOnlyOneElement(n+" table tbody"),u()},s.search=function(){let t=n+" .tableAndPagination .mdc-text-field .material-icons";$(n+" .tableAndPagination .mdc-text-field__input").on("keyup","",function(t){!0!==l&&13===t.which&&(i=0,r(),l=!0)}),$(t).on("click","",function(){!0!==l&&(i=0,r(),l=!0)})},s.pagination=function(){let t=n+" .tableAndPagination .next";$(n+" .tableAndPagination .previous").on("click","",function(){!0!==l&&a>1&&i>0&&(i--,r(),l=!0)}),$(t).on("click","",function(){!0!==l&&a>1&&i<a-1&&(i++,r(),l=!0)})},s.sort=function(){$(n).on("click","table thead tr th",function(t){let e=$(n).find("table tbody tr"),i=!1===$(t.target).is("i")?$(t.target).index():$(t.target).parent().index();$(this).parent().find("i").hide(),!1===o?($(this).find("i").eq(0).show(),$(this).find("i").eq(1).hide(),o=!0):($(this).find("i").eq(0).hide(),$(this).find("i").eq(1).show(),o=!1),e.sort(function(t,n){let e=0,a=$.trim($(t).children("td").eq(i).text().toLowerCase()),l=$.trim($(n).children("td").eq(i).text().toLowerCase());return""!==a&&""!==l&&(e=!0===o?!1===$.isNumeric(a)?a.localeCompare(l):a-l:!1===$.isNumeric(a)?l.localeCompare(a):l-a),e}),e.length>1&&$.each(e,function(t,e){$(n).find("table tbody").append(e)})})},s.populate=function(t){$(n).find(".tableAndPagination .mdc-text-field__input").val(""),$(n).find("table tbody").css("visibility","visible"),void 0!==t.response.values&&($(n).find(".tableAndPagination .mdc-text-field__input").val(t.response.values.search.value),$(n).find(".tableAndPagination .text").html(t.response.values.pagination.text),void 0!==t.response.values.count&&($(n).find(".tableAndPagination .count").show(),$(n).find(".tableAndPagination .count span").html(t.response.values.count)),$(n).find("table tbody").length>0?$(n).find("table tbody").html(t.response.values.listHtml):$(n).find(".list_result").html(t.response.values.listHtml),c(),u())}}