"use strict";const chaato=new Chaato;function Chaato(){let e,t,n,i,o,l,a,s,h,r,c,f,u,g,m,d,p,T,v;function k(){$(".graph_container").find(".info").css({top:event.offsetY+20,left:event.offsetX+20}),$(".graph_container").find(".info").hide(),$.each(c,function(t,n){$.each(n,function(n,i){let o=(u.x-(T[0]+f))/v[0],l=(u.y-(T[1]+f))/v[1],a=Math.pow(i[0]-o,2),s=Math.pow(i[1]-l,2);Math.floor(Math.sqrt(a+s))<=10&&($(".graph_container").find(".info p span").eq(0).text(e.label.name),$(".graph_container").find(".info p span").eq(1).text(e.elements[t].name[n]),$(".graph_container").find(".info p span").eq(2).text(e.elements[t].items[n]),$(".graph_container").find(".info").show())})})}this.setBackgroundType=function(e){g=e},this.setAnimationSpeed=function(e){d=e},this.setPadding=function(e){p=e},this.setTranslate=function(e){T=e},this.setScale=function(e){v=e},this.init=function(){e={},t=null,n=0,i=0,o=null,l=0,a=0,s=-1,h=0,r=[],c=[],f=2,g="grid",m=0,d=.5,u={},p=30,T=[95,20],v=[.91,.88]},this.create=function(x){e=x,t=$(".graph_container").find(".canvas")[0],n=t.width,i=t.height,o=t.getContext("2d"),l=Math.floor(n/e.label.items.length);let y=[];$.each(e.elements,function(t,n){y[t]=Math.max.apply(null,e.elements[t].items)}),a=Math.max.apply(null,y),s=function(e){if(0===e.length)return-1;let t=e[0],n=0;for(let i=1;i<e.length;i++)e[i]>t&&(n=i,t=e[i]);return n}(y),h=Math.floor(i/e.elements[s].items.length)-1,o.translate(T[0],T[1]),o.scale(v[0],v[1]),o.beginPath(),o.lineWidth=1,o.strokeStyle="#000000",o.moveTo(0,i),o.lineTo(n-l,i),o.lineWidth=1,o.strokeStyle="#000000",o.moveTo(0,0),o.lineTo(0,i),o.stroke(),function(){let t=e.label.items;$.each(t,function(e,t){o.beginPath(),o.font="20px Arial",o.textAlign="center",o.strokeStyle="#000000",o.fillText(t,e*l,i+p+5),"grid"!==g&&"lineY"!==g||(o.lineWidth=1,o.strokeStyle="#e9e9e9",o.moveTo(e*l,0),o.lineTo(e*l,i)),o.stroke()});let r=e.elements[s].items.length,c=Math.ceil(a/t.length);c<2?c=1:2===c&&(c=3);for(let e=0;e<=a+c;e+=c)o.beginPath(),o.font="20px Arial",o.textAlign="end",o.strokeStyle="#000000",o.fillText(e,-p,i-e*h/(a/r)+5),"grid"!==g&&"lineX"!==g||(o.lineWidth=1,o.strokeStyle="#e9e9e9",o.moveTo(0,i-e*h/(a/r)),o.lineTo(n-l,i-e*h/(a/r))),o.stroke()}(),$.each(e.elements,function(t,n){$.each(n,function(n,u){var g,p,T;"items"===n&&(c[t]=[],g=t,p=e.elements[t].color,T=u,r=[],0===d?function(t,n,u){$.each(u,function(u,g){o.beginPath(),o.lineWidth=1,o.strokeStyle=n,o.lineCap="round",o.lineJoin="round";let m=u*l,d=i-g*h/(a/e.elements[s].items.length);o.moveTo(m,d),o.lineTo(r[0],r[1]),r[0]=m,r[1]=d,o.closePath(),o.stroke(),o.arc(m,d,5,0,f*Math.PI),c[t][u]=[m,d],o.fill()})}(g,p,T):function t(n,r,u,g,m){let p=m*l,T=i-u[m]*h/(a/e.elements[s].items.length),v=0,$=setInterval(function(){(v+=d)>1&&(v=1),o.beginPath(),o.lineWidth=1,o.strokeStyle=r,o.lineCap="round",o.lineJoin="round";let e=g[0]+(p-g[0])*v,i=g[1]+(T-g[1])*v;o.moveTo(g[0],g[1]),o.lineTo(e,i),o.closePath(),o.stroke(),(e===p&&i===T||0===g.length)&&(clearInterval($),o.arc(p,T,5,0,f*Math.PI),c[n][m-1]=[p,T],o.fill(),g[0]=p,g[1]=T,m<u.length&&t(n,r,u,g,m))},30);m++}(g,p,T,r,m=0))})}),$(t).on("mousemove","",function(e){u=function(e,n){let i=0,o=0;if("canvas"===e){let e=t.getBoundingClientRect();mouseX=n.clientX-e.left,mouseY=n.clientY-e.top,i=Math.floor(mouseX/e.width*t.width),o=Math.floor(mouseY/e.height*t.height)}else"client"===e&&(i=n.clientX-window.pageXOffset,o=n.clientY-window.pageYOffset);return{x:i,y:o}}("canvas",e),k()})}}