var chaato=new Chaato;function Chaato(){var u,a,o,g,m,d,v,p,y,l,w,T,r,h,k,s,f,c,e=this;e.setBackgroundType=function(e){h=e},e.setAnimationSpeed=function(e){k=e},e.setPadding=function(e){s=e},e.setTranslate=function(e){f=e},e.setScale=function(e){c=e},e.init=function(){u={},a=$(".graph_container").find(".canvas")[0],o=a.width,g=a.height,m=a.getContext("2d"),p=-1,y=v=d=0,l=new Array,w=new Array,T=2,h="grid",k=.5,r={},s=30,f=new Array(95,20),c=new Array(.91,.88)},e.create=function(e){u=e,d=Math.floor(o/u.label.items.length);var n=new Array;$.each(u.elements,function(e,t){n[e]=Math.max.apply(null,u.elements[e].items)}),v=Math.max.apply(null,n),p=function(e){if(0===e.length)return-1;for(var t=e[0],n=0,i=1;i<e.length;i++)e[i]>t&&(t=e[n=i]);return n}(n),y=Math.floor(g/u.elements[p].items.length)-1,m.translate(f[0],f[1]),m.scale(c[0],c[1]),m.beginPath(),m.lineWidth=1,m.strokeStyle="#000000",m.moveTo(0,g),m.lineTo(o-d,g),m.lineWidth=1,m.strokeStyle="#000000",m.moveTo(0,0),m.lineTo(0,g),m.stroke(),function(){var e=u.label.items;$.each(e,function(e,t){m.beginPath(),m.font="20px Arial",m.textAlign="center",m.strokeStyle="#000000",m.fillText(t,e*d,g+s+5),"grid"!==h&&"lineY"!==h||(m.lineWidth=1,m.strokeStyle="#e9e9e9",m.moveTo(e*d,0),m.lineTo(e*d,g)),m.stroke()});var t=u.elements[p].items.length,n=Math.ceil(v/e.length);n<2?n=1:2===n&&(n=3);for(var i=0;i<=v+n;i+=n)m.beginPath(),m.font="20px Arial",m.textAlign="end",m.strokeStyle="#000000",m.fillText(i,-s,g-i*y/(v/t)+5),"grid"!==h&&"lineX"!==h||(m.lineWidth=1,m.strokeStyle="#e9e9e9",m.moveTo(0,g-i*y/(v/t)),m.lineTo(o-d,g-i*y/(v/t))),m.stroke()}(),$.each(u.elements,function(a,e){$.each(e,function(e,t){var n,i,o;"items"===e&&(w[a]=[],n=a,i=u.elements[a].color,o=t,l=[],0===k?function(o,a,e){$.each(e,function(e,t){m.beginPath(),m.lineWidth=1,m.strokeStyle=a,m.lineCap="round",m.lineJoin="round";var n=e*d,i=g-t*y/(v/u.elements[p].items.length);m.moveTo(n,i),m.lineTo(l[0],l[1]),l[0]=n,l[1]=i,m.closePath(),m.stroke(),m.arc(n,i,5,0,T*Math.PI),w[o][e]=[n,i],m.fill()})}(n,i,o):function n(i,o,a,l,r){var h=r*d;var s=g-a[r]*y/(v/u.elements[p].items.length);var f=0;var c=setInterval(function(){1<(f+=k)&&(f=1),m.beginPath(),m.lineWidth=1,m.strokeStyle=o,m.lineCap="round",m.lineJoin="round";var e=l[0]+(h-l[0])*f,t=l[1]+(s-l[1])*f;m.moveTo(l[0],l[1]),m.lineTo(e,t),m.closePath(),m.stroke(),(e===h&&t===s||0===l.length)&&(clearInterval(c),m.arc(h,s,5,0,T*Math.PI),w[i][r-1]=[h,s],m.fill(),l[0]=h,l[1]=s,r<a.length&&n(i,o,a,l,r))},30);r++}(n,i,o,l,0))})}),$(a).on("mousemove","",function(e){r=function(e,t){var n=0,i=0;if("canvas"===e){var o=a.getBoundingClientRect();mouseX=t.clientX-o.left,mouseY=t.clientY-o.top,n=Math.floor(mouseX/o.width*a.width),i=Math.floor(mouseY/o.height*a.height)}else"client"===e&&(n=t.clientX-window.pageXOffset,i=t.clientY-window.pageYOffset);return{x:n,y:i}}("canvas",e),$(".graph_container").find(".info").css({top:event.offsetY+20,left:event.offsetX+20}),$(".graph_container").find(".info").hide(),$.each(w,function(l,e){$.each(e,function(e,t){var n=(r.x-(f[0]+T))/c[0],i=(r.y-(f[1]+T))/c[1],o=Math.pow(t[0]-n,2),a=Math.pow(t[1]-i,2);Math.floor(Math.sqrt(o+a))<=10&&($(".graph_container").find(".info p span").eq(0).text(u.label.name),$(".graph_container").find(".info p span").eq(1).text(u.elements[l].name[e]),$(".graph_container").find(".info p span").eq(2).text(u.elements[l].items[e]),$(".graph_container").find(".info").show())})})})}}