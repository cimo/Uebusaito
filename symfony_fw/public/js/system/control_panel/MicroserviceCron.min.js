"use strict";class ControlPanelMicroserviceCron{constructor(){this.selectSended=!1,this.selectId=-1}action=()=>{this.selectDesktop(),this.selectMobile(),$("#form_cp_microservice_cron_create").on("submit","",e=>{e.preventDefault(),ajax.send(!0,$(e.target).prop("action"),$(e.target).prop("method"),$(e.target).serialize(),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,c=>{ajax.reply(c,`#${e.target.id}`)},null,null)})};changeView=()=>{if("mobile"===helper.checkWidthType()){if(!0===this.selectSended&&(this.selectId=$("#cp_microservice_cron_select_mobile").find("select option:selected").val(),this.selectSended=!1),this.selectId>=0){$("#cp_microservice_cron_select_result_desktop").find(".checkbox_column input[type='checkbox']").prop("checked",!1);let e=$("#cp_microservice_cron_select_result_desktop").find(".checkbox_column input[type='checkbox']").parents("tr").find(".id_column");$.each(e,(e,c)=>{$.trim($(c).text())===String(this.selectId)&&$(c).parents("tr").find(".checkbox_column input").prop("checked",!0)})}}else!0===this.selectSended&&(this.selectId=$.trim($("#cp_microservice_cron_select_result_desktop").find(".checkbox_column input[type='checkbox']:checked").parents("tr").find(".id_column").text()),this.selectSended=!1),this.selectId>0&&$("#cp_microservice_cron_select_mobile").find(`select option[value="${this.selectId}"]`).prop("selected",!0)};selectDesktop=()=>{const e=new TableAndPagination;e.setButtonsStatus="show",e.create(window.url.cpMicroserviceCronSelect,"#cp_microservice_cron_select_result_desktop",!0),e.search(),e.pagination(),e.sort(),$(document).on("click","#cp_microservice_cron_select_result_desktop .refresh",c=>{ajax.send(!0,window.url.cpMicroserviceCronSelect,"post",{event:"refresh",token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,c=>{ajax.reply(c,""),e.populate(c)},null,null)}),$(document).on("click","#cp_microservice_cron_select_result_desktop .delete_all",e=>{popupEasy.create(window.text.index_5,window.textMicroserviceCron.label_2,()=>{ajax.send(!0,window.url.cpMicroserviceCronDelete,"post",{event:"deleteAll",token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,e=>{ajax.reply(e,""),$.each($("#cp_microservice_cron_select_result_desktop").find("table .id_column"),(e,c)=>{$.trim($(c).parents("tr").find(".id_column").text())>4&&$(c).parents("tr").remove()}),$("#cp_microservice_cron_select_result").html("")},null,null)})}),$(document).on("click","#cp_microservice_cron_select_result_desktop .cp_microservice_cron_delete",e=>{let c=$.trim($(e.currentTarget).parents("tr").find(".id_column").text());this.deleteElement(c)}),$(document).on("click","#cp_microservice_cron_select_button_desktop",e=>{let c=$.trim($(e.currentTarget).parent().find(".checkbox_column input:checked").parents("tr").find(".id_column").text());ajax.send(!0,window.url.cpMicroserviceCronProfile,"post",{event:"result",id:c,token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",()=>{$("#cp_microservice_cron_select_result").html("")},c=>{this.profile(c,`#${e.currentTarget.id}`)},null,null)}),$(document).on("click",".checkbox_column input[type='checkbox']",e=>{$("#cp_microservice_cron_select_result").html("")})};selectMobile=()=>{$(document).on("submit","#form_cp_microservice_cron_select_mobile",e=>{e.preventDefault(),ajax.send(!0,$(e.currentTarget).prop("action"),$(e.currentTarget).prop("method"),helper.serializeJson($(e.currentTarget)),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",()=>{$("#cp_microservice_cron_select_result").html("")},c=>{this.profile(c,`#${e.currentTarget.id}`)},null,null)}),$(document).on("change","#form_microservice_cron_select_id",e=>{$("#cp_microservice_cron_select_result").html("")})};profile=(e,c)=>{ajax.reply(e,c),!1===$.isEmptyObject(e.response)&&void 0!==e.response.render&&(this.selectSended=!0,$("#cp_microservice_cron_select_result").html(e.response.render),materialDesign.refresh(),$("#form_microservice_cron_level").on("keyup","",e=>{$(e.target).val($(e.target).val().toUpperCase())}),$("#form_cp_microservice_cron_profile").on("submit","",e=>{e.preventDefault(),ajax.send(!0,$(e.target).prop("action"),$(e.target).prop("method"),$(e.target).serialize(),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,c=>{ajax.reply(c,`#${e.target.id}`),void 0!==c.response.messages.success&&($("#cp_microservice_cron_select_result").html(""),$("#cp_microservice_cron_select_result_desktop .refresh").click())},null,null)}),$("#cp_microservice_cron_delete").on("click","",e=>{this.deleteElement(null)}))};deleteElement=e=>{popupEasy.create(window.text.index_5,window.textMicroserviceCron.label_1,()=>{ajax.send(!0,window.url.cpMicroserviceCronDelete,"post",{event:"delete",id:e,token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,e=>{ajax.reply(e,""),void 0!==e.response.messages.success&&($.each($("#cp_microservice_cron_select_result_desktop").find("table .id_column"),(c,t)=>{e.response.values.id===$.trim($(t).text())&&$(t).parents("tr").remove()}),$("#form_microservice_cron_select_id").find(`option[value="${e.response.values.id}"]`).remove(),$("#cp_microservice_cron_select_result").html(""),$("#cp_microservice_cron_select_result_desktop").find(".refresh").click())},null,null)})}}