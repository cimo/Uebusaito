"use strict";const controlPanelUser=new ControlPanelUser;function ControlPanelUser(){let e,t;function n(t,n){ajax.reply(t,n),!1===$.isEmptyObject(t.response)&&void 0!==t.response.render&&(e=!0,$("#cp_user_select_result").html(t.response.render),helper.wordTag("#user_roleUserId","#form_user_roleUserId"),widgetDatePicker.setInputFill(".widget_datePicker_input"),widgetDatePicker.action(),materialDesign.refresh(),$("#form_cp_user_profile").on("submit","",function(e){e.preventDefault(),ajax.send(!0,$(this).prop("action"),$(this).prop("method"),$(this).serialize(),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(t){ajax.reply(t,"#"+e.currentTarget.id),void 0!==t.response.messages.success&&($("#cp_user_select_result").html(""),$("#cp_user_select_result_desktop .refresh").click())},null,null)}),$("#attemptLogin_reset").on("click","",function(e){e.preventDefault(),ajax.send(!0,window.url.cpUserAttemptLoginReset,"post",{event:"reset",token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(e){ajax.reply(e,""),void 0!==e.response.messages.success&&$(".attemptLogin_reset_result").text(0)},null,null)}),$("#cp_user_delete").on("click","",function(){s(null)}))}function s(e){popupEasy.create(window.text.index_5,window.textUser.label_1,function(){ajax.send(!0,window.url.cpUserDelete,"post",{event:"delete",id:e,token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(e){ajax.reply(e,""),void 0!==e.response.messages.success&&($.each($("#cp_user_select_result_desktop").find("table .id_column"),function(t,n){e.response.values.id===$.trim($(n).text())&&$(n).parents("tr").remove()}),$("#form_user_select_id").find("option[value='"+e.response.values.id+"']").remove(),$("#cp_user_select_result").html(""),$("#cp_user_select_result_desktop").find(".refresh").click())},null,null)})}this.init=function(){e=!1,t=-1},this.action=function(){!function(){const e=new TableAndPagination;e.init(),e.setButtonsStatus("show"),e.create(window.url.cpUserSelect,"#cp_user_select_result_desktop",!0),e.search(),e.pagination(),e.sort(),$(document).on("click","#cp_user_select_result_desktop .refresh",function(){ajax.send(!0,window.url.cpUserSelect,"post",{event:"refresh",token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(t){ajax.reply(t,""),e.populate(t)},null,null)}),$(document).on("click","#cp_user_select_result_desktop .delete_all",function(){popupEasy.create(window.text.index_5,window.textUser.label_2,function(){ajax.send(!0,window.url.cpUserDelete,"post",{event:"deleteAll",token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(e){ajax.reply(e,""),$.each($("#cp_user_select_result_desktop").find("table .id_column"),function(e,t){let n=$.trim($(t).parents("tr").find(".id_column").text());n>1&&$(t).parents("tr").remove()}),$("#cp_user_select_result").html("")},null,null)})}),$(document).on("click","#cp_user_select_result_desktop .cp_user_delete",function(){let e=$.trim($(this).parents("tr").find(".id_column").text());s(e)}),$(document).on("click","#cp_user_select_button_desktop",function(e){let t=$.trim($(this).parent().find(".checkbox_column input:checked").parents("tr").find(".id_column").text());ajax.send(!0,window.url.cpUserProfile,"post",{event:"result",id:t,token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",function(){$("#cp_user_select_result").html("")},function(t){n(t,"#"+e.currentTarget.id)},null,null)}),$(document).on("click",".checkbox_column input[type='checkbox']",function(){$("#cp_user_select_result").html("")})}(),$(document).on("submit","#form_cp_user_select_mobile",function(e){e.preventDefault(),ajax.send(!0,$(this).prop("action"),$(this).prop("method"),helper.serializeJson($(this)),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",function(){$("#cp_user_select_result").html("")},function(t){n(t,"#"+e.currentTarget.id)},null,null)}),$(document).on("change","#form_user_select_id",function(){$("#cp_user_select_result").html("")}),helper.wordTag("#user_roleUserId","#form_user_roleUserId"),$("#form_cp_user_create").on("submit","",function(e){e.preventDefault(),ajax.send(!0,$(this).prop("action"),$(this).prop("method"),$(this).serialize(),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(t){ajax.reply(t,"#"+e.currentTarget.id)},null,null)})},this.changeView=function(){if("mobile"===helper.checkWidthType()){if(!0===e&&(t=$("#cp_user_select_mobile").find("select option:selected").val(),e=!1),t>=0){$("#cp_user_select_result_desktop").find(".checkbox_column input[type='checkbox']").prop("checked",!1);let e=$("#cp_user_select_result_desktop").find(".checkbox_column input[type='checkbox']").parents("tr").find(".id_column");$.each(e,function(e,n){$.trim($(n).text())===String(t)&&$(n).parents("tr").find(".checkbox_column input").prop("checked",!0)})}}else!0===e&&(t=$.trim($("#cp_user_select_result_desktop").find(".checkbox_column input[type='checkbox']:checked").parents("tr").find(".id_column").text()),e=!1),t>0&&$("#cp_user_select_mobile").find("select option[value='"+t+"']").prop("selected",!0)}}