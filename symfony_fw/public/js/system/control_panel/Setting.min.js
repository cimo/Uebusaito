"use strict";class ControlPanelSetting{constructor(){}action=()=>{this.languageManage(),helper.wordTag("#setting_roleUserId","#form_setting_roleUserId"),$("#form_setting_payPalCurrencyCode").on("keyup","",e=>{$(e.target).val($(e.target).val().toUpperCase())}),$("#form_cp_setting_save").on("submit","",e=>{e.preventDefault();let a=$("#form_setting_languageManageCode").prop("name");$("#form_setting_languageManageCode").removeAttr("name");let n=$("#form_setting_languageManageDate").prop("name");$("#form_setting_languageManageDate").removeAttr("name");let t=$("#form_setting_languageManageActive").prop("name");$("#form_setting_languageManageActive").removeAttr("name"),$("#setting_language_manage_delete").removeClass("button_icon_inline"),$("#setting_language_manage_close").click(),ajax.send(!0,$(e.target).prop("action"),$(e.target).prop("method"),$(e.target).serialize(),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,g=>{ajax.reply(g,"#"+e.currentTarget.id),$("#form_setting_languageManageCode").prop("name",a),$("#form_setting_languageManageDate").prop("name",n),$("#form_setting_languageManageActive").prop("name",t)},null,null)})};languageManage=()=>{let e=$("#form_setting_language").prop("selectedIndex"),a=$("#form_setting_language").val(),n="";a===window.setting.language?$("#setting_language_manage_delete").hide():$("#setting_language_manage_delete").show(),$("#form_setting_language").on("change","",n=>{e=$(n.target).prop("selectedIndex"),a=$(n.target).val(),a===window.setting.language?$("#setting_language_manage_delete").hide():$("#setting_language_manage_delete").show(),$("#setting_language_manage_close").click()}),$("#setting_language_manage_modify").on("click","",e=>{n="modifyLanguage",$("#setting_language_manage_container").show();let t=$("#form_setting_language").find(":selected").text().split("|"),g=t[2].trim()===window.textSetting.label_3?1:0;$("#form_setting_languageManageCode").prop("disabled",!0),$("#form_setting_languageManageCode").val(a),$("#form_setting_languageManageDate").val(t[1].trim()),$("#form_setting_languageManageActive").val(g),a===window.setting.language?$("#form_setting_languageManageActive").parents(".form_row").hide():$("#form_setting_languageManageActive").parents(".form_row").show(),materialDesign.refresh()}),$("#setting_language_manage_create").on("click","",e=>{n="createLanguage",$("#setting_language_manage_container").show(),$("#form_setting_languageManageCode").prop("disabled",!1),$("#form_setting_languageManageCode").val(""),$("#form_setting_languageManageDate").val(""),$("#form_setting_languageManageActive").val("")}),$("#setting_language_manage_confirm").on("click","",e=>{let a=$("#form_setting_languageManageCode").val(),t=$("#form_setting_languageManageDate").val(),g=$("#form_setting_languageManageActive").val(),i=$("#language_text_container").find(".mdc-list-item[aria-disabled='true'] img").prop("class");a===i?popupEasy.create(window.text.index_5,window.textSetting.label_1,()=>{this.confirm(n,a,t,g)}):this.confirm(n,a,t,g)}),$("#setting_language_manage_delete").on("click","",n=>{popupEasy.create(window.text.index_5,window.textSetting.label_2,()=>{ajax.send(!0,window.url.cpSettingLanguageManage,"post",{event:"deleteLanguage",code:a,token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,a=>{ajax.reply(a,""),void 0!==a.response.messages.success&&($("#setting_language_manage_close").click(),$("#form_setting_language").find("option").eq(e).remove(),$("#language_text_container").find(".mdc-list-item").eq(e-1).remove())},null,null)})}),$("#setting_language_manage_close").on("click","",e=>{n="",$("#form_setting_languageManageCode").val(""),$("#form_setting_languageManageDate").val(""),$("#form_setting_languageManageActive").val(""),$("#setting_language_manage_container").hide()})};confirm=(e,a,n,t)=>{ajax.send(!0,window.url.cpSettingLanguageManage,"post",{event:e,code:a,date:n,active:t,token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,e=>{if(ajax.reply(e,""),!1===$.isEmptyObject(e.response)&&void 0!==e.response.values)window.location.href=e.response.values.url;else if(void 0!==e.response.messages.success){if(0===$("#form_setting_language").find("option:contains("+a+")").length)$("#form_setting_language").append('<option value="'+a+'">'+a+" | "+n+" | "+t+"</option>"),"1"===t&&$("#language_text_container").find(".mdc-menu__items.mdc-list").append('<li class="mdc-list-item" role="menuitem">\n                                    <span>\n                                        <img class="'+a+'" src="'+window.url.root+"/images/templates/"+window.setting.template+"/lang/"+a+'.png" alt="'+a+'.png"/>\n                                    '+a+"\n                                    </span>\n                                </li>");else{let e="1"===t?window.textSetting.label_3:window.textSetting.label_4;$("#form_setting_language").find("option:contains("+a+")").text(a+" | "+n+" | "+e);let g=null,i=$("#language_text_container").find(".mdc-menu__items.mdc-list .mdc-list-item");$.each(i,(e,n)=>{if(!0===$(n).find("img").hasClass(a))return g=$(n),!1}),"1"===t?null===g&&$("#language_text_container").find(".mdc-menu__items.mdc-list").append('<li class="mdc-list-item" role="menuitem">\n                                        <span>\n                                            <img class="'+a+'" src="'+window.url.root+"/images/templates/"+window.setting.template+"/lang/"+a+'.png" alt="'+a+'.png"/>\n                                            '+a+"\n                                        </span>\n                                    </li>"):"0"===t&&null!==g&&g.remove()}$("#setting_language_manage_close").click()}},null,null)}}