var controlPanelMicroserviceDeploy=new ControlPanelMicroserviceDeploy;function ControlPanelMicroserviceDeploy(){var c=!1,t=-1;function n(e,o){ajax.reply(e,o),!1===$.isEmptyObject(e.response)&&void 0!==e.response.render&&(c=!0,$("#cp_microservice_deploy_select_result").html(e.response.render),materialDesign.refresh(),$("#form_cp_microservice_deploy_profile").on("submit","",function(o){o.preventDefault(),ajax.send(!0,$(this).prop("action"),$(this).prop("method"),new FormData(this),"json",!1,!1,!1,null,function(e){ajax.reply(e,"#"+o.currentTarget.id),void 0!==e.response.messages.success&&($("#cp_microservice_deploy_select_result").html(""),$("#cp_microservice_deploy_select_result_desktop .refresh").click())},null,null)}),$("#cp_microservice_deploy_delete").on("click","",function(){i(null)}))}function i(e){popupEasy.create(window.text.index_5,window.textMicroserviceDeploy.label_1,function(){ajax.send(!0,window.url.cpMicroserviceDeployDelete,"post",{event:"delete",id:e,token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(c){ajax.reply(c,""),void 0!==c.response.messages.success&&($.each($("#cp_microservice_deploy_select_result_desktop").find("table .id_column"),function(e,o){c.response.values.id===$.trim($(o).text())&&$(o).parents("tr").remove()}),$("#form_microservice_deploy_select_id").find("option[value='"+c.response.values.id+"']").remove(),$("#cp_microservice_deploy_select_result").html(""),$("#cp_microservice_deploy_select_result_desktop").find(".refresh").click())},null,null)})}this.init=function(){!function(){var o=new TableAndPagination;o.init(),o.setButtonsStatus("show"),o.create(window.url.cpMicroserviceDeploySelect,"#cp_microservice_deploy_select_result_desktop",!0),o.search(),o.pagination(),o.sort(),$(document).on("click","#cp_microservice_deploy_select_result_desktop .refresh",function(){ajax.send(!0,window.url.cpMicroserviceDeploySelect,"post",{event:"refresh",token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(e){ajax.reply(e,""),o.populate(e)},null,null)}),$(document).on("click","#cp_microservice_deploy_select_result_desktop .delete_all",function(){popupEasy.create(window.text.index_5,window.textMicroserviceDeploy.label_2,function(){ajax.send(!0,window.url.cpMicroserviceDeployDelete,"post",{event:"deleteAll",token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(e){ajax.reply(e,""),$.each($("#cp_microservice_deploy_select_result_desktop").find("table .id_column"),function(e,o){$(o).parents("tr").remove()}),$("#cp_microservice_deploy_select_result").html("")},null,null)})}),$(document).on("click","#cp_microservice_deploy_select_result_desktop .cp_module_delete",function(){i($.trim($(this).parents("tr").find(".id_column").text()))}),$(document).on("click","#cp_microservice_deploy_select_button_desktop",function(o){var e=$.trim($(this).parent().find(".checkbox_column input:checked").parents("tr").find(".id_column").text());ajax.send(!0,window.url.cpMicroserviceDeployProfile,"post",{event:"result",id:e,token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",function(){$("#cp_microservice_deploy_select_result").html("")},function(e){n(e,"#"+o.currentTarget.id)},null,null)})}(),$(document).on("submit","#form_cp_microservice_deploy_select_mobile",function(o){o.preventDefault(),ajax.send(!0,$(this).prop("action"),$(this).prop("method"),utility.serializeJson($(this)),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",function(){$("#cp_microservice_deploy_select_result").html("")},function(e){n(e,"#"+o.currentTarget.id)},null,null)}),$("#form_cp_microservice_deploy_render").on("submit","",function(o){o.preventDefault(),ajax.send(!0,$(this).prop("action"),$(this).prop("method"),$(this).serialize(),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(e){ajax.reply(e,"#"+o.currentTarget.id),void 0!==e.response.values&&($("#cp_microservice_deploy_render_result").html(e.response.values.renderHtml),$("#cp_microservice_deploy_ssh_connection_result").html(""),materialDesign.refresh(),$(".git_execute").on("click","",function(){var e=$("#form_microservice_deploy_select_id").val(),o=$(this).attr("data-action"),c=$("#cp_microservice_deploy_render_result").find("input[name='branchName']");popupEasy.create(window.text.index_5,window.textMicroserviceDeploy.label_3,function(){ajax.send(!0,window.url.cpMicroserviceDeployExecute,"post",{event:"execute",id:e,action:o,branchName:c.val(),token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",function(){"pull"!==o&&(c.val(""),c.focus()),$("#cp_microservice_deploy_ssh_connection_result").html("")},function(e){ajax.reply(e,""),void 0!==e.response.values&&$("#cp_microservice_deploy_ssh_connection_result").html(e.response.values.sshConnection)},null,null)})}))},null,null)}),$("#form_cp_microservice_deploy_create").on("submit","",function(o){o.preventDefault(),ajax.send(!0,$(this).prop("action"),$(this).prop("method"),new FormData(this),"json",!1,!1,!1,null,function(e){ajax.reply(e,"#"+o.currentTarget.id)},null,null)}),$("#form_microservice_deploy_select_id").on("change","",function(){$("#cp_microservice_deploy_render_result").html(""),$("#cp_microservice_deploy_ssh_connection_result").html("")})},this.changeView=function(){if("mobile"===utility.checkWidthType()){if(!0===c&&(t=$("#cp_microservice_deploy_select_mobile").find("select option:selected").val(),c=!1),0<=t){$("#cp_microservice_deploy_select_result_desktop").find(".checkbox_column input[type='checkbox']").prop("checked",!1);var e=$("#cp_microservice_deploy_select_result_desktop").find(".checkbox_column input[type='checkbox']").parents("tr").find(".id_column");$.each(e,function(e,o){$.trim($(o).text())===String(t)&&$(o).parents("tr").find(".checkbox_column input").prop("checked",!0)})}}else!0===c&&(t=$.trim($("#cp_microservice_deploy_select_result_desktop").find(".checkbox_column input[type='checkbox']:checked").parents("tr").find(".id_column").text()),c=!1),0<=t&&$("#cp_microservice_deploy_select_mobile").find("select option[value='"+t+"']").prop("selected",!0)}}