"use strict";class ControlPanelApiBasic{constructor(){}action=()=>{$(document).on("submit","#form_cp_apiBasic_select",e=>{e.preventDefault(),ajax.send(!0,$(e.currentTarget).prop("action"),$(e.currentTarget).prop("method"),helper.serializeJson($(e.currentTarget)),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",()=>{$("#cp_api_select_result").html("")},a=>{this._profile(a,`#${e.currentTarget.id}`)},null,null)}),$("#form_cp_apiBasic_create").on("submit","",e=>{e.preventDefault();let a=$(e.target).find("input[name='form_apiBasic[name]']").val();ajax.send(!0,$(e.target).prop("action"),$(e.target).prop("method"),$(e.target).serialize(),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,o=>{ajax.reply(o,`#${e.target.id}`),void 0!==o.response.messages.success&&$("#form_apiBasic_select_id").append(`<option value="${o.response.values.id}">${a}</option>`)},null,null)})};_profile=(e,a)=>{ajax.reply(e,a),!1===$.isEmptyObject(e.response)&&void 0!==e.response.render&&($("#cp_api_select_result").html(e.response.render),uploadChunk.setUrlRequest=`${window.url.cpApiBasicCsv}?token=${window.session.token}&event=csv`,uploadChunk.setTagContainer="#upload_chunk_apiBasic_csv_container",uploadChunk.setTagProgressBar="#upload_chunk_apiBasic_csv_container .upload_chunk .mdc-linear-progress",uploadChunk.setProcessLock=!0,uploadChunk.processFile(),widgetDatePicker.setInputFill=".widget_datePicker_input",widgetDatePicker.action(),materialDesign.refresh(),$("#button_apiBasic_show_log").on("click","",e=>{ajax.send(!0,window.url.cpApiBasicLog,"post",{event:"log",token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,e=>{ajax.reply(e,""),void 0!==e.response.values.log&&popupEasy.create("File log",e.response.values.log)},null,null)}),$("#button_apiBasic_show_graph").on("click","",e=>{ajax.send(!0,window.url.cpApiBasicGraph,"post",{event:"graph",year:$(".graph_period_year").val(),month:$(".graph_period_month").val(),token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,e=>{ajax.reply(e,""),void 0!==e.response.render&&(popupEasy.create(`<p>Show graph</p>${e.response.values.selectPeriodYearHtml} ${e.response.values.selectPeriodMonthHtml}`,e.response.render),$(".graph_period_year, .graph_period_month").on("change","",e=>{$("#button_apiBasic_show_graph").click()}),chaato.setBackgroundType="grid",chaato.setAnimationSpeed=.5,chaato.setPadding=30,chaato.setTranslate=[95,20],chaato.setScale=[.91,.88],chaato.create=e.response.values.json)},null,null)}),$("#download_detail_button").on("click","",e=>{$(".download_detail_command").toggle("slow"),$("#button_apiBasic_download_detail").off("click").on("click","",e=>{let a=void 0!==$(e.target).attr("data-event")?$(e.target).attr("data-event"):$(e.target).parent().attr("data-event"),o=$("input[name='download_date_start']").val(),t=$("input[name='download_date_end']").val();ajax.send(!0,window.url.cpApiBasicDownloadDetail,"post",{event:a,dateStart:o,dateEnd:t,token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,e=>{if(ajax.reply(e,""),void 0!==e.response.values&&void 0!==e.response.values.url){window.location=e.response.values.url;let a=setTimeout(()=>{clearTimeout(a),ajax.send(!1,window.url.cpApiBasicDownloadDetail,"post",{event:"download_delete",token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,e=>{ajax.reply(e,"")},null,null)},100)}},null,null)})}),$("#form_cp_apiBasic_profile").on("submit","",e=>{e.preventDefault();let a=$("#form_apiBasic_select_id").val(),o=$(e.target).find("input[name='form_apiBasic[name]']").val();ajax.send(!0,$(e.target).prop("action"),$(e.target).prop("method"),$(e.target).serialize(),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,t=>{ajax.reply(t,`#${e.target.id}`),void 0!==t.response.messages.success&&($("#form_apiBasic_select_id").find(`option[value="${a}"]`).text(o),$("#cp_api_select_result").html(""))},null,null)}),$("#cp_apiBasic_delete").on("click","",e=>{popupEasy.create(window.text.index_5,window.textApiBasic.label_1,()=>{ajax.send(!0,window.url.cpApiBasicDelete,"post",{event:"delete",id:null,token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,e=>{ajax.reply(e,""),void 0!==e.response.messages.success&&($("#form_apiBasic_select_id").find(`option[value="${e.response.values.id}"]`).remove(),$("#cp_api_select_result").html(""))},null,null)})}))}}