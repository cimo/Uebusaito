var controlPanelApiBasic=new ControlPanelApiBasic;function ControlPanelApiBasic(){this.init=function(){$(document).on("submit","#form_cp_apiBasic_select",function(a){a.preventDefault(),ajax.send(!0,$(this).prop("action"),$(this).prop("method"),utility.serializeJson($(this)),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",function(){$("#cp_api_select_result").html("")},function(e){var n,o;n=e,o="#"+a.currentTarget.id,ajax.reply(n,o),!1===$.isEmptyObject(n.response)&&void 0!==n.response.render&&($("#cp_api_select_result").html(n.response.render),uploadChunk.init(),uploadChunk.setUrlRequest(window.url.cpApiBasicCsv+"?token="+window.session.token+"&event=csv"),uploadChunk.setTagContainer("#upload_chunk_apiBasic_csv_container"),uploadChunk.setTagProgressBar("#upload_chunk_apiBasic_csv_container .upload_chunk .mdc-linear-progress"),uploadChunk.setLockUrl(window.url.root+"/listener/lockListener.php"),uploadChunk.processFile(),widgetDatePicker.setInputFill(".widget_datePicker_input"),widgetDatePicker.action(),materialDesign.refresh(),$("#button_apiBasic_show_log").on("click","",function(e){ajax.send(!0,window.url.cpApiBasicLog,"post",{event:"log",token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(e){ajax.reply(e,""),void 0!==e.response.values.log&&popupEasy.create("File log",e.response.values.log)},null,null)}),$("#button_apiBasic_show_graph").on("click","",function(e){ajax.send(!0,window.url.cpApiBasicGraph,"post",{event:"graph",year:$(".graph_period_year").val(),month:$(".graph_period_month").val(),token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(e){ajax.reply(e,""),void 0!==e.response.render&&(popupEasy.create("<p>Show graph</p>"+e.response.values.selectPeriodYearHtml+e.response.values.selectPeriodMonthHtml,e.response.render),$(".graph_period_year, .graph_period_month").on("change","",function(){$("#button_apiBasic_show_graph").click()}),chaato.init(),chaato.setBackgroundType("grid"),chaato.setAnimationSpeed(.5),chaato.setPadding(30),chaato.setTranslate(new Array(95,20)),chaato.setScale(new Array(.91,.88)),chaato.create(e.response.values.json))},null,null)}),$("#download_detail_button").on("click","",function(e){$(".download_detail_container").toggle("slow"),$("#button_apiBasic_download_detail").off("click").on("click","",function(e){var e=$(this).attr("data-event"),n=$("input[name='download_date_start']").val(),o=$("input[name='download_date_end']").val();ajax.send(!0,window.url.cpApiBasicDownloadDetail,"post",{event:e,dateStart:n,dateEnd:o,token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(e){if(ajax.reply(e,""),void 0!==e.response.values){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===this.readyState&&(window.location=e.response.values.url,setTimeout(function(){ajax.send(!1,window.url.cpApiBasicDownloadDetail,"post",{event:"download_delete",token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(e){ajax.reply(e,"")},null,null)},100))},n.open("head",e.response.values.url,!0),n.send()}},null,null)})}),$("#form_cp_apiBasic_profile").on("submit","",function(n){n.preventDefault();var o=$("#form_apiBasic_select_id").val(),a=$(this).find("input[name='form_apiBasic[name]']").val();ajax.send(!0,$(this).prop("action"),$(this).prop("method"),$(this).serialize(),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(e){ajax.reply(e,"#"+n.currentTarget.id),void 0!==e.response.messages.success&&($("#form_apiBasic_select_id").find("option[value='"+o+"']").text(a),$("#cp_api_select_result").html(""))},null,null)}),$("#cp_apiBasic_delete").on("click","",function(){popupEasy.create(window.text.index_5,window.textApiBasic.label_1,function(){ajax.send(!0,window.url.cpApiBasicDelete,"post",{event:"delete",id:null,token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(e){ajax.reply(e,""),void 0!==e.response.messages.success&&($("#form_apiBasic_select_id").find("option[value='"+e.response.values.id+"']").remove(),$("#cp_api_select_result").html(""))},null,null)})}))},null,null)}),$("#form_cp_apiBasic_create").on("submit","",function(n){n.preventDefault();var o=$("#form_apiBasic_select_id").find("option").length,a=$(this).find("input[name='form_apiBasic[name]']").val();ajax.send(!0,$(this).prop("action"),$(this).prop("method"),$(this).serialize(),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(e){ajax.reply(e,"#"+n.currentTarget.id),void 0!==e.response.messages.success&&$("#form_apiBasic_select_id").append('<option value="'+o+'">'+a+"</option>")},null,null)})}}