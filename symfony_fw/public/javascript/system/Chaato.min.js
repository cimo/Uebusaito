var chaato=new Chaato;function Chaato(){var g,a,o,u,m,d,p,v,y,s,w,T,h,l,k,r,f,c,e=this;e.setBackgroundType=function(e){l=e},e.setAnimationSpeed=function(e){k=e},e.setPadding=function(e){r=e},e.setTranslate=function(e){f=e},e.setScale=function(e){c=e},e.init=function(){g={},a=$(".graph_container").find(".canvas")[0],o=a.width,u=a.height,m=a.getContext("2d"),v=-1,y=p=d=0,s=new Array,w=new Array,T=2,l="grid",0,k=.5,h={},r=30,f=new Array(95,20),c=new Array(.91,.88)},e.create=function(e){g=e,d=Math.floor(o/g.label.items.length);var n=new Array;$.each(g.elements,function(e,t){n[e]=Math.max.apply(null,g.elements[e].items)}),p=Math.max.apply(null,n),v=function(e){if(0===e.length)return-1;for(var t=e[0],n=0,i=1;i<e.length;i++)e[i]>t&&(t=e[n=i]);return n}(n),y=Math.floor(u/g.elements[v].items.length)-1,m.translate(f[0],f[1]),m.scale(c[0],c[1]),m.beginPath(),m.lineWidth=1,m.strokeStyle="#000000",m.moveTo(0,u),m.lineTo(o-d,u),m.lineWidth=1,m.strokeStyle="#000000",m.moveTo(0,0),m.lineTo(0,u),m.stroke(),function(){var e=g.label.items;$.each(e,function(e,t){m.beginPath(),m.font="20px Arial",m.textAlign="center",m.strokeStyle="#000000",m.fillText(t,e*d,u+r+5),"grid"!==l&&"lineY"!==l||(m.lineWidth=1,m.strokeStyle="#e9e9e9",m.moveTo(e*d,0),m.lineTo(e*d,u)),m.stroke()});var t=g.elements[v].items.length,n=Math.ceil(p/e.length);n<2?n=1:2===n&&(n=3);for(var i=0;i<=p+n;i+=n)m.beginPath(),m.font="20px Arial",m.textAlign="end",m.strokeStyle="#000000",m.fillText(i,-r,u-i*y/(p/t)+5),"grid"!==l&&"lineX"!==l||(m.lineWidth=1,m.strokeStyle="#e9e9e9",m.moveTo(0,u-i*y/(p/t)),m.lineTo(o-d,u-i*y/(p/t))),m.stroke()}(),$.each(g.elements,function(h,e){$.each(e,function(e,t){var n,i,o,a,l,r;"items"===e&&(w[h]=[],n=h,i=g.elements[h].color,o=t,s=[],0===k?(a=n,l=i,r=o,$.each(r,function(e,t){m.beginPath(),m.lineWidth=1,m.strokeStyle=l,m.lineCap="round",m.lineJoin="round";var n=e*d,i=u-t*y/(p/g.elements[v].items.length);m.moveTo(n,i),m.lineTo(s[0],s[1]),s[0]=n,s[1]=i,m.closePath(),m.stroke(),m.arc(n,i,5,0,T*Math.PI),w[a][e]=[n,i],m.fill()})):function n(i,o,a,l,r){var h=r*d,s=u-a[r]*y/(p/g.elements[v].items.length),f=0,c=setInterval(function(){1<(f+=k)&&(f=1),m.beginPath(),m.lineWidth=1,m.strokeStyle=o,m.lineCap="round",m.lineJoin="round";var e=l[0]+(h-l[0])*f,t=l[1]+(s-l[1])*f;m.moveTo(l[0],l[1]),m.lineTo(e,t),m.closePath(),m.stroke(),(e===h&&t===s||0===l.length)&&(clearInterval(c),m.arc(h,s,5,0,T*Math.PI),w[i][r-1]=[h,s],m.fill(),l[0]=h,l[1]=s,r<a.length&&n(i,o,a,l,r))},30);r++}(n,i,o,s,0))})}),$(a).on("mousemove","",function(e){h=function(e,t){var n=0,i=0;if("canvas"===e){var o=a.getBoundingClientRect();mouseX=t.clientX-o.left,mouseY=t.clientY-o.top,n=Math.floor(mouseX/o.width*a.width),i=Math.floor(mouseY/o.height*a.height)}else"client"===e&&(n=t.clientX-window.pageXOffset,i=t.clientY-window.pageYOffset);return{x:n,y:i}}("canvas",e),$(".graph_container").find(".info").css({top:event.offsetY+20,left:event.offsetX+20}),$(".graph_container").find(".info").hide(),$.each(w,function(r,e){$.each(e,function(e,t){var n=(h.x-(f[0]+T))/c[0],i=(h.y-(f[1]+T))/c[1],o=Math.pow(t[0]-n,2),a=Math.pow(t[1]-i,2),l=Math.floor(Math.sqrt(o+a));l<=10&&($(".graph_container").find(".info p span").eq(0).text(g.label.name),$(".graph_container").find(".info p span").eq(1).text(g.elements[r].name[e]),$(".graph_container").find(".info p span").eq(2).text(g.elements[r].items[e]),$(".graph_container").find(".info").show())})})})}}