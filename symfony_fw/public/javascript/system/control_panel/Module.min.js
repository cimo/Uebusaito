var controlPanelModule=new ControlPanelModule;function ControlPanelModule(){var o=!1,n=-1;function l(e,t){ajax.reply(e,t),!1===$.isEmptyObject(e.response)&&void 0!==e.response.render&&(o=!0,$("#cp_module_select_result").html(e.response.render),c(),materialDesign.refresh(),$("#form_cp_module_profile").on("submit","",function(t){t.preventDefault(),ajax.send(!0,$(this).prop("action"),$(this).prop("method"),$(this).serialize(),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(e){ajax.reply(e,"#"+t.currentTarget.id),void 0!==e.response.messages.success&&($("#cp_module_select_result").html(""),$("#cp_module_select_result_desktop .refresh").click())},null,null)}),$("#cp_module_delete").on("click","",function(){i(null)}))}function c(){utility.sortableElement("#module_rankColumnSort","#form_module_rankColumnSort"),$("#form_module_position").off("change").on("change","",function(){ajax.send(!0,window.url.cpModuleProfileSort,"post",{event:"refresh",position:$(this).val(),token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(e){ajax.reply(e,""),void 0!==e.response.values.moduleSortListHtml&&($("#module_rankColumnSort").find(".sort_result").html(e.response.values.moduleSortListHtml),utility.sortableElement("#module_rankColumnSort","#form_module_rankColumnSort"))},null,null)})}function i(e){popupEasy.create(window.text.index_5,window.textModule.label_1,function(){ajax.send(!0,window.url.cpModuleDelete,"post",{event:"delete",id:e,token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(o){ajax.reply(o,""),void 0!==o.response.messages.success&&($.each($("#cp_module_select_result_desktop").find("table .id_column"),function(e,t){o.response.values.id===$.trim($(t).text())&&$(t).parents("tr").remove()}),$("#form_module_select_id").find("option[value='"+o.response.values.id+"']").remove(),$("#cp_module_select_result").html(""),$("#cp_module_select_result_desktop").find(".refresh").click())},null,null)})}this.init=function(){var t;(t=new TableAndPagination).init(),t.setButtonsStatus("show"),t.create(window.url.cpModuleSelect,"#cp_module_select_result_desktop",!0),t.search(),t.pagination(),t.sort(),$(document).on("click","#cp_module_select_result_desktop .refresh",function(){ajax.send(!0,window.url.cpModuleSelect,"post",{event:"refresh",token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(e){ajax.reply(e,""),t.populate(e)},null,null)}),$(document).on("click","#cp_module_select_result_desktop .delete_all",function(){popupEasy.create(window.text.index_5,window.textModule.label_2,function(){ajax.send(!0,window.url.cpModuleDelete,"post",{event:"deleteAll",token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(e){ajax.reply(e,""),$.each($("#cp_module_select_result_desktop").find("table .id_column"),function(e,t){var o=$.trim($(t).parents("tr").find(".id_column").text());2<o&&$(t).parents("tr").remove()}),$("#cp_module_select_result").html("")},null,null)})}),$(document).on("click","#cp_module_select_result_desktop .cp_module_delete",function(){var e=$.trim($(this).parents("tr").find(".id_column").text());i(e)}),$(document).on("click","#cp_module_select_button_desktop",function(t){var e=$.trim($(this).parent().find(".checkbox_column input:checked").parents("tr").find(".id_column").text());ajax.send(!0,window.url.cpModuleProfile,"post",{event:"result",id:e,token:window.session.token},"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",function(){$("#cp_module_select_result").html("")},function(e){l(e,"#"+t.currentTarget.id)},null,null)}),$(document).on("submit","#form_cp_module_select_mobile",function(t){t.preventDefault(),ajax.send(!0,$(this).prop("action"),$(this).prop("method"),utility.serializeJson($(this)),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",function(){$("#cp_module_select_result").html("")},function(e){l(e,"#"+t.currentTarget.id)},null,null)}),c(),$("#form_cp_module_create").on("submit","",function(t){t.preventDefault(),ajax.send(!0,$(this).prop("action"),$(this).prop("method"),$(this).serialize(),"json",!1,!0,"application/x-www-form-urlencoded; charset=UTF-8",null,function(e){ajax.reply(e,"#"+t.currentTarget.id)},null,null)})},this.changeView=function(){if("mobile"===utility.checkWidthType()){if(!0===o&&(n=$("#cp_module_select_mobile").find("select option:selected").val(),o=!1),0<=n){$("#cp_module_select_result_desktop").find(".checkbox_column input[type='checkbox']").prop("checked",!1);var e=$("#cp_module_select_result_desktop").find(".checkbox_column input[type='checkbox']").parents("tr").find(".id_column");$.each(e,function(e,t){$.trim($(t).text())===String(n)&&$(t).parents("tr").find(".checkbox_column input").prop("checked",!0)})}}else!0===o&&(n=$.trim($("#cp_module_select_result_desktop").find(".checkbox_column input[type='checkbox']:checked").parents("tr").find(".id_column").text()),o=!1),0<=n&&$("#cp_module_select_mobile").find("select option[value='"+n+"']").prop("selected",!0);c()}}